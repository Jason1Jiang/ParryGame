# å¤šé‡åå‡»ä¼˜åŒ– v3.4 - æµ‹è¯•æŒ‡å—

## æ›´æ–°æ—¥æœŸ
2025-12-18

## å®ç°å†…å®¹

### 1. é…ç½®ä¿®æ”¹ âœ…
åœ¨ `config.json` çš„ `visual.multiCounter` ä¸­æ·»åŠ äº† `comboScaling` é…ç½®ï¼š

```json
"comboScaling": {
  "enabled": true,
  "thresholds": [0, 3, 5, 10, 15, 20, 30, 40, 50],
  "counts": [2, 3, 4, 5, 6, 7, 8, 9, 10]
}
```

### 2. ä»£ç ä¿®æ”¹ âœ…

#### æ–°å¢å‡½æ•°ï¼šgetMultiCounterLimit()
```javascript
// æ ¹æ®å½“å‰è¿å‡»æ•°è¿”å›å¤šé‡åå‡»æ¬¡æ•°ä¸Šé™
function getMultiCounterLimit() {
    const cfg = CONFIG.visual?.multiCounter;
    if (!cfg || !cfg.enabled) return 3;
    
    const scaling = cfg.comboScaling;
    if (!scaling || !scaling.enabled) {
        return cfg.maxTargets; // å¦‚æœæœªå¯ç”¨è¿å‡»ç¼©æ”¾ï¼Œè¿”å›é»˜è®¤å€¼
    }
    
    // æ ¹æ®è¿å‡»æ•°æŸ¥æ‰¾å¯¹åº”çš„æ¬¡æ•°
    for (let i = scaling.thresholds.length - 1; i >= 0; i--) {
        if (comboCount >= scaling.thresholds[i]) {
            return scaling.counts[i];
        }
    }
    
    return scaling.counts[0]; // é»˜è®¤è¿”å›ç¬¬ä¸€ä¸ªå€¼
}
```

#### ä¿®æ”¹å‡½æ•°ï¼štriggerMultiCounter()
```javascript
// ä½¿ç”¨åŠ¨æ€ä¸Šé™æ›¿ä»£å›ºå®šçš„ cfg.maxTargets
const maxTargets = getMultiCounterLimit();

for (let i = 0; i < Math.min(maxTargets, sortedEnemies.length); i++) {
    targets.push(sortedEnemies[i]);
}
```

---

## è¿å‡»å¯¹åº”è¡¨

| è¿å‡»æ•° | å¤šé‡åå‡»æ¬¡æ•° |
|--------|--------------|
| 0-2    | 2æ¬¡          |
| 3-4    | 3æ¬¡          |
| 5-9    | 4æ¬¡          |
| 10-14  | 5æ¬¡          |
| 15-19  | 6æ¬¡          |
| 20-29  | 7æ¬¡          |
| 30-39  | 8æ¬¡          |
| 40-49  | 9æ¬¡          |
| 50+    | 10æ¬¡ï¼ˆä¸Šé™ï¼‰ |

---

## æµ‹è¯•æ­¥éª¤

### æµ‹è¯•1ï¼šä½è¿å‡»é˜¶æ®µï¼ˆ0-9è¿å‡»ï¼‰

#### æ­¥éª¤
1. å¯åŠ¨æ¸¸æˆ
2. å‡»æ€1-2ä¸ªæ•Œäººï¼ˆ0-2è¿å‡»ï¼‰
3. åœ¨æçŸ­æ—¶é—´å†…æŒ‰ä¸‹æ ¼æŒ¡é”®å¹¶æˆåŠŸæ ¼æŒ¡
4. è§‚å¯Ÿå¤šé‡åå‡»å‡»æ€çš„æ•Œäººæ•°é‡

#### é¢„æœŸç»“æœ
- âœ… 0-2è¿å‡»ï¼šå‡»æ€2ä¸ªæ•Œäºº
- âœ… 3-4è¿å‡»ï¼šå‡»æ€3ä¸ªæ•Œäºº
- âœ… 5-9è¿å‡»ï¼šå‡»æ€4ä¸ªæ•Œäºº

#### éªŒè¯æ–¹æ³•
- è§‚å¯Ÿå±å¹•ä¸Šæ•Œäººè¢«å‡»æ€çš„æ•°é‡
- è§‚å¯Ÿè¿å‡»æ•°æ˜¾ç¤º
- ç¡®è®¤å‡»æ€æ•°é‡ä¸è¿å‡»æ•°å¯¹åº”

---

### æµ‹è¯•2ï¼šä¸­è¿å‡»é˜¶æ®µï¼ˆ10-29è¿å‡»ï¼‰

#### æ­¥éª¤
1. ç»´æŒ10-29è¿å‡»
2. è§¦å‘å¤šé‡åå‡»
3. è§‚å¯Ÿå‡»æ€æ•°é‡

#### é¢„æœŸç»“æœ
- âœ… 10-14è¿å‡»ï¼šå‡»æ€5ä¸ªæ•Œäºº
- âœ… 15-19è¿å‡»ï¼šå‡»æ€6ä¸ªæ•Œäºº
- âœ… 20-29è¿å‡»ï¼šå‡»æ€7ä¸ªæ•Œäºº

#### éªŒè¯æ–¹æ³•
- è¿å‡»æ•°è¾¾åˆ°10æ—¶ï¼Œè§¦å‘å¤šé‡åå‡»åº”å‡»æ€5ä¸ªæ•Œäºº
- è¿å‡»æ•°è¾¾åˆ°15æ—¶ï¼Œè§¦å‘å¤šé‡åå‡»åº”å‡»æ€6ä¸ªæ•Œäºº
- è¿å‡»æ•°è¾¾åˆ°20æ—¶ï¼Œè§¦å‘å¤šé‡åå‡»åº”å‡»æ€7ä¸ªæ•Œäºº

---

### æµ‹è¯•3ï¼šé«˜è¿å‡»é˜¶æ®µï¼ˆ30+è¿å‡»ï¼‰

#### æ­¥éª¤
1. ç»´æŒ30+è¿å‡»
2. è§¦å‘å¤šé‡åå‡»
3. è§‚å¯Ÿå‡»æ€æ•°é‡å’Œæ¸¸æˆå¹³è¡¡æ€§

#### é¢„æœŸç»“æœ
- âœ… 30-39è¿å‡»ï¼šå‡»æ€8ä¸ªæ•Œäºº
- âœ… 40-49è¿å‡»ï¼šå‡»æ€9ä¸ªæ•Œäºº
- âœ… 50+è¿å‡»ï¼šå‡»æ€10ä¸ªæ•Œäººï¼ˆä¸Šé™ï¼‰
- âœ… æ¸¸æˆä»æœ‰æŒ‘æˆ˜æ€§ï¼Œä¸ä¼šè¿‡äºç®€å•

#### éªŒè¯æ–¹æ³•
- é«˜è¿å‡»æ—¶å¤šé‡åå‡»å¨åŠ›æ˜æ˜¾å¢å¼º
- ä½†ä»éœ€è¦ç©å®¶æ“ä½œï¼Œä¸æ˜¯æ— æ•ŒçŠ¶æ€
- å¦‚æœæ•Œäººæ•°é‡ä¸è¶³ï¼Œåªå‡»æ€ç°æœ‰æ•Œäºº

---

### æµ‹è¯•4ï¼šè¾¹ç•Œæƒ…å†µ

#### æµ‹è¯•4.1ï¼šæ•Œäººæ•°é‡ä¸è¶³
```
åœºæ™¯ï¼šè¿å‡»50+ï¼Œä½†åœºä¸Šåªæœ‰5ä¸ªæ•Œäºº
é¢„æœŸï¼šåªå‡»æ€5ä¸ªæ•Œäººï¼ˆä¸ä¼šè¶…è¿‡å®é™…æ•°é‡ï¼‰
```

#### æµ‹è¯•4.2ï¼šè¿å‡»æ–­è£‚åé‡æ–°å¼€å§‹
```
åœºæ™¯ï¼šè¿å‡»ä»50é™åˆ°0
é¢„æœŸï¼šå¤šé‡åå‡»æ¬¡æ•°ä»10æ¬¡é™å›2æ¬¡
```

#### æµ‹è¯•4.3ï¼šé…ç½®ç¦ç”¨
```
åœºæ™¯ï¼šå°† comboScaling.enabled è®¾ä¸º false
é¢„æœŸï¼šä½¿ç”¨é»˜è®¤çš„ maxTargetsï¼ˆ3æ¬¡ï¼‰
```

---

## å¹³è¡¡æ€§æµ‹è¯•

### ä½è¿å‡»ï¼ˆ0-9ï¼‰
```
å¤šé‡åå‡»ï¼š2-4æ¬¡
éš¾åº¦ï¼šæ­£å¸¸
è¯„ä¼°ï¼šâœ… ç©å®¶ä»éœ€è°¨æ…æ“ä½œ
```

### ä¸­è¿å‡»ï¼ˆ10-29ï¼‰
```
å¤šé‡åå‡»ï¼š5-7æ¬¡
éš¾åº¦ï¼šè¾ƒå®¹æ˜“
è¯„ä¼°ï¼šâœ… ç©å®¶æœ‰æ˜æ˜¾ä¼˜åŠ¿ä½†ä¸æ— æ•Œ
```

### é«˜è¿å‡»ï¼ˆ30-49ï¼‰
```
å¤šé‡åå‡»ï¼š8-9æ¬¡
éš¾åº¦ï¼šå®¹æ˜“
è¯„ä¼°ï¼šâš ï¸ éœ€è¦æµ‹è¯•æ˜¯å¦è¿‡å¼º
```

### æé™è¿å‡»ï¼ˆ50+ï¼‰
```
å¤šé‡åå‡»ï¼š10æ¬¡
éš¾åº¦ï¼šå¾ˆå®¹æ˜“
è¯„ä¼°ï¼šâš ï¸ å¯èƒ½è¿‡å¼ºï¼Œä½†è¾¾åˆ°æ­¤é˜¶æ®µæœ¬èº«å°±æ˜¯æˆå°±
```

---

## è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹å½“å‰å¤šé‡åå‡»æ¬¡æ•°
åœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
getMultiCounterLimit()
```

### æŸ¥çœ‹å½“å‰è¿å‡»æ•°
åœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
comboCount
```

### æ‰‹åŠ¨è®¾ç½®è¿å‡»æ•°ï¼ˆæµ‹è¯•ç”¨ï¼‰
åœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
comboCount = 50  // è®¾ç½®ä¸º50è¿å‡»
```

### è§¦å‘å¤šé‡åå‡»ï¼ˆæµ‹è¯•ç”¨ï¼‰
åœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥ï¼š
```javascript
triggerMultiCounter()
```

---

## é—®é¢˜æ’æŸ¥

### é—®é¢˜1ï¼šå¤šé‡åå‡»æ¬¡æ•°æ²¡æœ‰å˜åŒ–
**å¯èƒ½åŸå› **ï¼š
- é…ç½®æœªåŠ è½½
- comboScaling.enabled ä¸º false
- æµè§ˆå™¨ç¼“å­˜

**è§£å†³æ–¹æ³•**ï¼š
1. æŒ‰ Ctrl+F5 å¼ºåˆ¶åˆ·æ–°
2. æ£€æŸ¥ config.json æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### é—®é¢˜2ï¼šè¿å‡»æ•°æ­£ç¡®ä½†æ¬¡æ•°ä¸å¯¹
**å¯èƒ½åŸå› **ï¼š
- thresholds æˆ– counts æ•°ç»„é…ç½®é”™è¯¯
- æ•°ç»„é•¿åº¦ä¸åŒ¹é…

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ config.json ä¸­çš„æ•°ç»„
2. ç¡®ä¿ thresholds å’Œ counts é•¿åº¦ç›¸åŒ
3. ç¡®ä¿ thresholds æ˜¯å‡åºæ’åˆ—

### é—®é¢˜3ï¼šæ¸¸æˆå¤ªç®€å•/å¤ªéš¾
**è§£å†³æ–¹æ³•**ï¼š
è°ƒæ•´é…ç½®å‚æ•°ï¼š

```json
// é™ä½éš¾åº¦ï¼ˆå¢åŠ æ¬¡æ•°ï¼‰
"counts": [3, 4, 5, 6, 7, 8, 10, 12, 15]

// æé«˜éš¾åº¦ï¼ˆå‡å°‘æ¬¡æ•°ï¼‰
"counts": [2, 3, 3, 4, 4, 5, 5, 6, 7]

// æé«˜é˜ˆå€¼ï¼ˆéœ€è¦æ›´é«˜è¿å‡»æ‰èƒ½æå‡ï¼‰
"thresholds": [0, 5, 10, 15, 25, 35, 50, 70, 100]
```

---

## æ€§èƒ½æµ‹è¯•

### å¸§ç‡æµ‹è¯•
```
æ­¥éª¤ï¼š
1. è§¦å‘10æ¬¡å¤šé‡åå‡»
2. è§‚å¯Ÿå¸§ç‡å˜åŒ–

é¢„æœŸï¼š
âœ… ä¿æŒ60 FPS
âœ… æ— æ˜æ˜¾å¡é¡¿
```

### CPUæµ‹è¯•
```
æ­¥éª¤ï¼š
1. é•¿æ—¶é—´æ¸¸ç©ï¼ˆ10åˆ†é’Ÿï¼‰
2. è§‚å¯ŸCPUä½¿ç”¨ç‡

é¢„æœŸï¼š
âœ… CPUä½¿ç”¨ç‡æ­£å¸¸
âœ… ä¸ä¹‹å‰ç‰ˆæœ¬ç›¸è¿‘
```

---

## é¢„æœŸæ•ˆæœ

### æ¸¸æˆä½“éªŒ
- ğŸ® è¿å‡»å¥–åŠ±æ›´æ˜æ˜¾
- ğŸ”¥ é«˜è¿å‡»æ›´æœ‰æˆå°±æ„Ÿ
- âš¡ å¤šé‡åå‡»æ›´éœ‡æ’¼
- ğŸ¯ æ­£å‘åé¦ˆå¾ªç¯æ›´å¼º

### ç©å®¶åé¦ˆï¼ˆé¢„æœŸï¼‰
- "è¿å‡»è¶Šé«˜è¶Šçˆ½ï¼"
- "10è¿å‡»åçš„å¤šé‡åå‡»å¤ªéœ‡æ’¼äº†ï¼"
- "ç»ˆäºæœ‰ç†ç”±ç»´æŒé«˜è¿å‡»äº†ï¼"
- "çœ‹åˆ°èƒ½å‡»æ€æ›´å¤šæ•Œäººå¾ˆæœ‰æˆå°±æ„Ÿï¼"

---

## ç›¸å…³æ–‡æ¡£

- [MULTI_COUNTER_OPTIMIZATION_v3.4.md](MULTI_COUNTER_OPTIMIZATION_v3.4.md) - å®Œæ•´è®¾è®¡æ–‡æ¡£
- [config.json](../../config.json) - é…ç½®æ–‡ä»¶
- [game.js](../../game.js) - æ¸¸æˆä»£ç 

---

## å®ç°çŠ¶æ€

- âœ… é…ç½®æ·»åŠ å®Œæˆ
- âœ… ä»£ç å®ç°å®Œæˆ
- â³ ç­‰å¾…æµ‹è¯•
- â³ ç­‰å¾…å¹³è¡¡æ€§è°ƒæ•´

---

**æ–‡æ¡£ç‰ˆæœ¬**: v3.4  
**æœ€åæ›´æ–°**: 2025-12-18  
**çŠ¶æ€**: å¾…æµ‹è¯• ğŸ§ª
